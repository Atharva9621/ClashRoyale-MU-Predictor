{% extends 'base.html' %}

{% block title %}App Home{% endblock title %}

{% block body %}
    <style>
        .outer-container{
            display: flex;
            flex-direction: column; 
            margin: 20vh 5vw;
            padding: 2vw 5vw;
            border-radius: 50px;
            background-color: rgba(240, 240, 240, 0.7);
        }
        .left-container{
            background-color: rgba(100, 240, 150, 0.5);
            display: flex;
            margin: 1vw;
            border-radius: 10px;
            padding: 50px 2vw;
            flex-direction: column;
            /* width: 40vw; */
        }
        .right-container{
            background-color: rgba(240, 100, 50, 0.5);
            display: flex;
            margin: 1vw;
            border-radius: 10px;
            padding: 50px 2vw;
        }
        .center-div{
            padding: 1vw;
            justify-content: center;
            text-align: center;
        }
        .card-row{
            display: flex;
        }

        .container {
            width: 100%; /* Adjust the width as needed */
            display: flex;
            flex-wrap: wrap;
            }

            .inner-div {
            width: 20%; /* 5 inner divs in a row */
            box-sizing: border-box;
            padding: 1vw; /* Add spacing between images as needed */
            flex: 1;
            }

            img {
            width: 100%; /* Ensure images take up the full width of the inner div */
            height: auto; /* Maintain image aspect ratio */
            }
            .clicked{
                filter: grayscale();
                /* filter: brightness(1.5); */
            }
    </style>
    <div class="outer-container" id="abc1">
        <div class="center-div">
            <h3>Please select the 16 cards</h3>
        </div>
        <div style="display: flex;">
            <div class="left-container">
              <div class="container">
                <div class="row">
                  <div class="inner-div">
                    <img src="../static/img/cards/archers.png" class="clickable-image player" id="0">
                    <img src="../static/img/cards/arrows.png" class="clickable-image player" id="1">
                    <img src="../static/img/cards/baby-dragon.png" class="clickable-image player" id="2">
                    <img src="../static/img/cards/balloon.png" class="clickable-image player" id="3">
                    <img src="../static/img/cards/bandit.png" class="clickable-image player" id="4">
                  </div>
                  
                  <div class="inner-div">
                    <img src="../static/img/cards/barbarian-barrel.png" id="5" class="clickable-image player" >
                    <img src="../static/img/cards/barbarian-hut.png" id="6" class="clickable-image player" >
                    <img src="../static/img/cards/barbarians.png" id="7" class="clickable-image player" >
                    <img src="../static/img/cards/bats.png" id="8" class="clickable-image player" >
                    <img src="../static/img/cards/battle-healer.png" id="9" class="clickable-image player" >
                  </div>

                  <div class="inner-div">
                    <img src="../static/img/cards/bomb-tower.png" id="10" class="clickable-image player" >
                    <img src="../static/img/cards/bomber.png" id="11" class="clickable-image player" >
                    <img src="../static/img/cards/bowler.png" id="12" class="clickable-image player" >
                    <img src="../static/img/cards/cannon-cart.png" id="13" class="clickable-image player" >
                    <img src="../static/img/cards/cannon.png" id="14" class="clickable-image player" >
                  </div>

                  <div class="inner-div">
                    <img src="../static/img/cards/clone.png" id="15" class="clickable-image player" >
                    <img src="../static/img/cards/dark-prince.png" id="16" class="clickable-image player" >
                    <img src="../static/img/cards/dart-goblin.png" id="17" class="clickable-image player" >
                    <img src="../static/img/cards/earthquake.png" id="18" class="clickable-image player" >
                    <img src="../static/img/cards/electro-dragon.png" id="19" class="clickable-image player" >
                  </div>
                </div>
              </div>
                  
            </div>
            <div class="right-container">
                <div class="container">
                    <div class="row">
                      <div class="inner-div">
                        <img src="../static/img/cards/archers.png" class="clickable-image opponent" id="0">
                        <img src="../static/img/cards/arrows.png" class="clickable-image opponent" id="1">
                        <img src="../static/img/cards/baby-dragon.png" class="clickable-image opponent" id="2">
                        <img src="../static/img/cards/balloon.png" class="clickable-image opponent" id="3">
                        <img src="../static/img/cards/bandit.png" class="clickable-image opponent" id="4">
                      </div>
                      
                      <div class="inner-div">
                        <img src="../static/img/cards/barbarian-barrel.png" id="5" class="clickable-image opponent" >
                        <img src="../static/img/cards/barbarian-hut.png" id="6" class="clickable-image opponent" >
                        <img src="../static/img/cards/barbarians.png" id="7" class="clickable-image opponent" >
                        <img src="../static/img/cards/bats.png" id="8" class="clickable-image opponent" >
                        <img src="../static/img/cards/battle-healer.png" id="9" class="clickable-image opponent" >
                      </div>

                      <div class="inner-div">
                        <img src="../static/img/cards/bomb-tower.png" id="10" class="clickable-image opponent" >
                        <img src="../static/img/cards/bomber.png" id="11" class="clickable-image opponent" >
                        <img src="../static/img/cards/bowler.png" id="12" class="clickable-image opponent" >
                        <img src="../static/img/cards/cannon-cart.png" id="13" class="clickable-image opponent" >
                        <img src="../static/img/cards/cannon.png" id="14" class="clickable-image opponent" >
                      </div>

                      <div class="inner-div">
                        <img src="../static/img/cards/clone.png" id="15" class="clickable-image opponent" >
                        <img src="../static/img/cards/dark-prince.png" id="16" class="clickable-image opponent" >
                        <img src="../static/img/cards/dart-goblin.png" id="17" class="clickable-image opponent" >
                        <img src="../static/img/cards/earthquake.png" id="18" class="clickable-image opponent" >
                        <img src="../static/img/cards/electro-dragon.png" id="19" class="clickable-image opponent" >
                      </div>
                    </div>
                  </div>

            </div>
        </div>
        <!-- <div class="center-div">
            <button type="button" class="btn btn-primary" id="predict_button"  name="csrfmiddlewaretoken" value="{% csrf_token %}">{% csrf_token %} Predict</button>
            <input type="hidden" name="csrfmiddlewaretoken" value="{% csrf_token %}">
        </div> -->
        <div class="center-div">
            <form method="post" id="card-form" action="/result">
                {% csrf_token %}
                <input type="hidden" name="cards"/>
                <input type="hidden" name="rcards"/>
                <input type="hidden" name="dummy" value="orange"/>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </div>
    </div>

    <script>
        let cardIndices = []
        let opponentCardIndices = []

        const clickableImages = document.querySelectorAll('.clickable-image');
            clickableImages.forEach(image => {
            image.addEventListener('click', () => {
                image.classList.toggle('clicked');
                const imageId = image.getAttribute('id');
                console.log(imageId)
                if(image.classList.contains('player')){
                  if(!(imageId in cardIndices) && cardIndices.length < 8)cardIndices.push(imageId)
                }
                else{
                  if(!(imageId in opponentCardIndices) && opponentCardIndices.length < 8)opponentCardIndices.push(imageId)
                }
                console.log(cardIndices)
                console.log(opponentCardIndices)
            });
        });
        document.getElementById('card-form').onsubmit = function(){
          this.elements.cards.value = cardIndices;
          this.elements.rcards.value = opponentCardIndices;
          return true;
        }
    </script>

{% endblock body %}
